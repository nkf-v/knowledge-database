## Идемпотентность

Выполнение запроса позволяет выполнить несколько запросов с гарантией что состояние изменится только один раз.

Предотвращает формирование лишних заказов.
Предотвращает многократное изменение одного и того же заказа.

Также есть возможность избежать сторонних запросов в callback.

---

## Использование cert, pem в запросе

Запросы к банкам выполняется с закрепленным сертификатом. API банка понимает что запрос пришел от партнера которому выдавали этот сертификат.

Сертификат может оказаться скомпроментирован и его необходимо сменить.

Также есть механизм регулярной смены сертииката обычно выдаются на год.

---

## Получение токена

Выполняется запрос на auth метод перед тем как выполнить какое либо дейсвие.

На примере SBP
Необходимо выполнить запрос с указанием client_id и client_secret перед тем как созадвать заказа или запрашивать его статус.

OAUTH
Header -> Authorization Bearer client_id:client_secret

IODC
Header -> client_id
Header -> client_sercret

Токен встраивается в запрос в Header -> Authorization -> Bearer token

---

## Использование кредов

Креды либо формируются самостоятельно либо выдаются банком партнеру в usernamse и password

Креды кодируется через base64

> base64(username:password) -> token

Полученный токен встраивается в запрос в Header -> Authorization -> Bearer token

---

## Использование токена

Токен выдает банковская система

Токен встраивается в запрос в Header -> Authorization -> Bearer token

